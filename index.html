<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Poké Haven – Recipes</title>

  <meta name="description" content="Image-first recipe book for Poké Haven 17. Play the game on Roblox.">
  <link rel="canonical" href="https://massivendurchfall.github.io">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="Poké Haven">
  <meta property="og:title" content="Poké Haven — Recipe Book">
  <meta property="og:description" content="Image-first recipe book for Poké Haven 17. Play the game on Roblox.">
  <meta property="og:url" content="https://massivendurchfall.github.io">
  <meta property="og:image" content="https://massivendurchfall.github.io/preview.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:alt" content="Poké Haven recipe book preview">
  <meta property="og:see_also" content="https://www.roblox.com/games/16331682055/Poke-Haven-17">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Poké Haven — Recipe Book">
  <meta name="twitter:description" content="Image-first recipe book for Poké Haven 17. Play the game on Roblox.">
  <meta name="twitter:image" content="https://massivendurchfall.github.io/preview.png">
  <meta name="theme-color" content="#d4af37">
  <link rel="icon" href="/favicon.png">

  <style>
    :root{--bg:#0e0e10;--paper:#f8f5ee;--ink:#1a1a1a;--gold:#d4af37;--inkmut:#cfcfcf}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:radial-gradient(1200px 800px at 70% -10%,#1a1a1f,var(--bg));color:var(--ink);font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;display:grid;place-items:center;padding:clamp(8px,2vw,24px)}
    .wrap{width:min(1200px,96vw)}
    .book{position:relative;width:100%;aspect-ratio:3/2;max-height:86vh;background:linear-gradient(90deg,#231f20,#2a2627);border-radius:18px;padding:clamp(8px,1.3vw,16px);box-shadow:0 30px 60px rgba(0,0,0,.55),inset 0 0 0 2px rgba(212,175,55,.25);display:grid;grid-template-columns:1fr 1fr;gap:clamp(8px,1vw,14px);overflow:hidden}
    .spine{position:absolute;inset:0;pointer-events:none}
    .spine:before{content:"";position:absolute;inset:0;width:3px;left:50%;transform:translateX(-50%);background:linear-gradient(#00000080,#0000);filter:blur(.3px);opacity:.6}
    .page{position:relative;overflow:clip;border-radius:14px;background:var(--paper);box-shadow:0 10px 30px rgba(0,0,0,.3);display:grid;grid-template-rows:1fr;padding:clamp(10px,1.2vw,18px)}
    .page:after{content:"";position:absolute;inset:0;mixed-blend-mode:multiply;opacity:.07;background:repeating-linear-gradient(90deg,#0000 0 6px,#0001 6px 7px);pointer-events:none}
    .media{position:relative;overflow:hidden;display:grid;place-items:center;background:linear-gradient(135deg,#ece7dc,#f7f4ee);min-height:0;padding:clamp(6px,1vw,14px);border-radius:10px}
    .media img{width:100%;height:100%;object-fit:contain;display:block;opacity:0;transition:opacity .25s ease}
    .nav{position:absolute;inset:0;display:flex;align-items:center;justify-content:space-between;pointer-events:none}
    .btn{pointer-events:auto;border:none;cursor:pointer;width:56px;height:56px;border-radius:50%;background:radial-gradient(circle at 30% 30%,#fff,#f1f1f1);border:1px solid #00000014;box-shadow:0 10px 20px #00000040;display:grid;place-items:center;transition:transform .08s ease,box-shadow .2s}
    .btn:active{transform:translateY(1px) scale(.98);box-shadow:0 6px 14px #00000055}
    .btn svg{width:26px;height:26px}
    .bar{margin:12px auto 0;width:min(1200px,96vw);display:grid;grid-template-columns:1fr auto 1fr;align-items:center;gap:12px;color:#ddd}
    .brand{color:var(--gold);font-weight:600;letter-spacing:.4px}
    .pager{justify-self:end;font-size:.9rem;color:var(--inkmut)}
    .search{display:flex;gap:8px;justify-self:center;align-items:center}
    .search input{width:min(360px,48vw);padding:10px 12px;border-radius:999px;border:1px solid #00000026;background:#121214;color:#eee;outline:none}
    .search button{padding:10px 14px;border-radius:999px;border:1px solid #00000014;background:#ffffff;cursor:pointer}
    .toast{position:fixed;top:14px;left:50%;transform:translateX(-50%);background:#111;color:#fff;padding:10px 14px;border-radius:10px;opacity:0;pointer-events:none;transition:opacity .25s}
    .toast.show{opacity:1}
    @media (max-width:800px){.book{aspect-ratio:3/4;grid-template-columns:1fr}.spine{display:none}}
    @media (max-width:480px){.book{aspect-ratio:2/3;padding:8px}.btn{width:44px;height:44px}.brand{font-size:.95rem}.pager{font-size:.8rem}.search input{width:min(280px,80vw)}}
    @media (min-width:1024px) and (max-width:1440px){.wrap{width:min(1280px,96vw)}}
    @media (min-width:1440px){.wrap{width:min(1440px,94vw)}.btn{width:64px;height:64px}}
    body{padding-top:calc(clamp(8px,2vw,24px) + env(safe-area-inset-top))}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="bar">
      <div class="brand">Poké Haven · Recipes</div>
      <div class="search"><input id="q" placeholder="Search drink…" autocomplete="off"><button id="find" type="button">Search</button></div>
      <div class="pager" id="pager">1 / 1</div>
    </div>
    <section class="book" aria-label="Recipe book">
      <div class="spine"></div>
      <article class="page" id="left"></article>
      <article class="page" id="right"></article>
      <div class="nav">
        <button class="btn" id="prev" aria-label="Previous" title="Previous">
          <svg viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"/></svg>
        </button>
        <button class="btn" id="next" aria-label="Next" title="Next">
          <svg viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18l6-6-6-6"/></svg>
        </button>
      </div>
    </section>
  </div>
  <div class="toast" id="toast"></div>

  <script>
    const TOTAL_PAGES=18;
    const files=Array.from({length:TOTAL_PAGES},(_,i)=>`${i+1}.png`);

    const INDEX=[{n:'7 Ginger',s:1},{n:'Arnold Palmer',s:1},{n:'Beach Comer',s:1},{n:'Beefeater Gin & Tonic',s:1},{n:'Black Russian',s:1},{n:'Blk Russian',s:1},{n:'Bloody Maria',s:1},{n:'Blue Lagoon',s:1},{n:'Blue Scoob',s:1},{n:'California Surfer',s:2},{n:'Choccy Teeni',s:2},{n:'Chocolatini',s:2},{n:'Chocolate Old Fashioned',s:2},{n:'Colorado Bulldog',s:2},{n:'Cosmopolitan',s:2},{n:'Cranberry Beton',s:2},{n:'Cuba Libre',s:2},{n:'Da Bird',s:3},{n:'Diablo',s:3},{n:'Dream Punk',s:3},{n:'Espresso Teeni',s:3},{n:'French Teeni',s:3},{n:'French 75',s:3},{n:'Grey Garden',s:3},{n:'Grin Reaper',s:3},{n:'Irish Lemonade',s:4},{n:'Jack & Coke',s:4},{n:'Jack and Coke',s:4},{n:'Jack & Jingle',s:4},{n:'Jelly Teeni',s:4},{n:'Jager Bomb',s:4},{n:'Jäger Bomb',s:4},{n:'Last Word',s:4},{n:'Lemon-Drop',s:4},{n:'Limoncello Collins',s:4},{n:'Longpolitan',s:5},{n:'Manhattan',s:5},{n:'Massey Teeni',s:5},{n:'Mafia Mojito',s:5},{n:'Malebu Mojito',s:5},{n:'Malebu Sunrise',s:5},{n:'Malebu Pina Colada',s:5},{n:'Martel Sidecar',s:5},{n:'Menma',s:6},{n:'Mojito',s:6},{n:'Mojo',s:6},{n:'Mudslide',s:6},{n:'Naigroni',s:6},{n:'Negroni',s:6},{n:'Old Fashioned',s:6},{n:'Paloma',s:6},{n:'Palmer',s:6},{n:'Passion Star Teeni',s:7},{n:'Pernoid Fizz',s:7},{n:'Penicillin',s:7},{n:'Pina Colada',s:7},{n:'Sea Journey',s:7},{n:'Regret',s:7},{n:'Regret and Sorrow',s:7},{n:"Roblox's Delight",s:7},{n:"Roblock's Delight",s:7},{n:'Sambuca Sour',s:8},{n:'Shirley',s:8},{n:'Shirley Temple',s:8},{n:'Sorrow',s:8},{n:'Spooks Surprise',s:8},{n:'Swift Sour',s:8},{n:'Tequila Sunrise',s:8},{n:'Twist Tea',s:8},{n:'Vod. Teeni',s:9},{n:'Vod Teeni',s:9},{n:'Vodka Teeni',s:9},{n:'Whisc Smash',s:9},{n:'Whisc Sour',s:9},{n:'Wht Russian',s:9},{n:'White Russian',s:9},{n:'X on the Beach',s:9},{n:'Sex on the Beach',s:9}];

    const $L=document.getElementById('left');
    const $R=document.getElementById('right');
    const $pager=document.getElementById('pager');
    const $prev=document.getElementById('prev');
    const $next=document.getElementById('next');
    const $q=document.getElementById('q');
    const $find=document.getElementById('find');
    const $toast=document.getElementById('toast');
    const $book=document.querySelector('.book');

    let iPage=0;

    function renderSide(el,src){
      el.innerHTML='';
      const media=document.createElement('div');media.className='media';
      if(src){
        const img=new Image();img.alt='';
        img.onload=()=>{img.style.opacity='1'};
        img.src=`${src}?v=${Date.now()}`;
        img.onerror=()=>{media.innerHTML=`<div style="color:#777">Missing: ${src}</div>`};
        media.append(img)
      }else{
        media.innerHTML='<div style="color:#777">—</div>'
      }
      media.style.gridRow='1 / -1';media.style.height='100%';media.style.width='100%';el.append(media)
    }

    function render(){
      const mobile=matchMedia('(max-width: 800px)').matches;
      const left=files[iPage]||null;
      const right=mobile?null:(files[iPage+1]||null);
      renderSide($L,left);
      if(mobile){$R.style.visibility='hidden';$R.innerHTML='';}
      else{$R.style.visibility='';renderSide($R,right);}
      const total=Math.ceil(files.length/(mobile?1:2));
      const current=mobile?(iPage+1):(Math.floor(iPage/2)+1);
      $pager.textContent=`${current} / ${total}`;
      $prev.disabled=iPage===0;
      $next.disabled=mobile?(iPage>=files.length-1):(iPage>=files.length-2);
    }

    function next(){const mobile=matchMedia('(max-width: 800px)').matches;const step=mobile?1:2;if(iPage<files.length-step){iPage+=step;render();}}
    function prev(){const mobile=matchMedia('(max-width: 800px)').matches;const step=mobile?1:2;if(iPage>=step){iPage-=step;render();}else if(iPage>0){iPage=0;render();}}

    function toast(t){$toast.textContent=t;$toast.classList.add('show');clearTimeout(toast._t);toast._t=setTimeout(()=>{$toast.classList.remove('show')},1600)}
    function norm(s){return (s||'').toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g,'').replace(/[^a-z0-9\s]/g,' ').replace(/\s+/g,' ').trim()}
    function lev(a,b){const m=a.length,n=b.length,d=Array.from({length:m+1},()=>Array(n+1).fill(0));for(let i=0;i<=m;i++)d[i][0]=i;for(let j=0;j<=n;j++)d[0][j]=j;for(let i=1;i<=m;i++){for(let j=1;j<=n;j++){const c=a[i-1]===b[j-1]?0:1;d[i][j]=Math.min(d[i-1][j]+1,d[i][j-1]+1,d[i-1][j-1]+c)}}return d[m][n]}
    function score(q,c){const a=norm(q),b=norm(c);if(!a||!b)return 0;if(b.includes(a))return 1;const qa=a.split(' '),qb=b.split(' '),inter=qa.filter(t=>qb.includes(t)).length;const tok=inter/qa.length;const l=1-lev(a,b)/Math.max(a.length,b.length);return Math.max(tok,l)}
    function gotoSpread(n){const maxSpreads=Math.ceil(files.length/2);if(n<1||n>maxSpreads){toast('Page out of range');return}iPage=(n-1)*2;render()}
    function runSearch(){const q=$q.value.trim();if(!q){toast('Enter a drink name');return}const ranked=INDEX.map(x=>({s:x.s,n:x.n,sc:score(q,x.n)})).sort((a,b)=>b.sc-a.sc);const best=ranked[0];if(!best||best.sc<0.5){toast('No close match');return}gotoSpread(best.s)}

    $next.addEventListener('click',next);
    $prev.addEventListener('click',prev);
    $find.addEventListener('click',runSearch);
    $q.addEventListener('keydown',e=>{if(e.key==='Enter')runSearch()});
    window.addEventListener('keydown',e=>{if(e.key==='ArrowRight')next();if(e.key==='ArrowLeft')prev()});

    let tSX=null,tSY=null;
    if($book){
      $book.addEventListener('touchstart',e=>{const t=e.touches[0];tSX=t.clientX;tSY=t.clientY},{passive:true});
      $book.addEventListener('touchend',e=>{const t=e.changedTouches[0];if(tSX==null)return;const dx=t.clientX-tSX,dy=t.clientY-tSY;tSX=null;tSY=null;if(Math.abs(dx)>50&&Math.abs(dy)<60){if(dx<0)next();else prev();}},{passive:true});
    }

    window.addEventListener('resize',render);
    files.forEach(src=>{const im=new Image();im.src=src});
    render();
  </script>
</body>
</html>
